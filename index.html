<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta name="description" content="Interne Helfer App f√ºr Team-Koordination" />
    
    <!-- PWA Meta Tags -->
    <link rel="manifest" href="./manifest.json">
    <link rel="icon" type="image/png" href="./icon-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="./icon-512x512.png" sizes="512x512">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <title>Helfer App</title>
    <style>
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .tab-button.active { 
            background-color: black; 
            color: white; 
            border-color: black;
        }
        
        /* Ticker Animation */
        @keyframes ticker {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }
        .ticker-container {
            overflow: hidden;
            white-space: nowrap;
        }
        .ticker-content {
            display: inline-block;
            animation: ticker 30s linear infinite;
        }
        
        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 100;
        }
        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .modal-content {
            background: white;
            border-radius: 1rem;
            padding: 1.5rem;
            max-width: 90vw;
            width: 600px;
            max-height: 80vh;
            overflow-y: auto;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen pb-24">
    <!-- Header -->
    <header class="sticky top-0 z-10 backdrop-blur bg-white/70 border-b border-gray-200">
        <div class="max-w-6xl mx-auto px-4 py-4 flex items-center justify-between">
            <div class="flex items-center gap-2">
                <div class="h-9 w-9 rounded-2xl bg-black text-white grid place-items-center font-bold">H</div>
                <div class="text-lg font-semibold tracking-tight">Helfer App</div>
            </div>
            <nav class="flex gap-2" id="tab-nav">
                <button class="tab-button active px-4 py-2 rounded-xl text-sm font-medium transition shadow-sm border bg-black text-white border-black" data-tab="home">Start</button>
                <button class="tab-button px-4 py-2 rounded-xl text-sm font-medium transition shadow-sm border bg-white hover:bg-gray-50 border-gray-200" data-tab="termine">Termine</button>
                <button class="tab-button px-4 py-2 rounded-xl text-sm font-medium transition shadow-sm border bg-white hover:bg-gray-50 border-gray-200" data-tab="chat">Chat</button>
                <button class="tab-button px-4 py-2 rounded-xl text-sm font-medium transition shadow-sm border bg-white hover:bg-gray-50 border-gray-200" data-tab="album">Bilderalbum</button>
                <button class="tab-button px-4 py-2 rounded-xl text-sm font-medium transition shadow-sm border bg-white hover:bg-gray-50 border-gray-200" data-tab="forms">Formulare</button>
                <button class="tab-button px-4 py-2 rounded-xl text-sm font-medium transition shadow-sm border bg-white hover:bg-gray-50 border-gray-200" data-tab="files">Dateien</button>
            </nav>
            <div class="hidden md:flex items-center gap-2">
                <span class="text-sm text-gray-600">Hallo, Helfer/in</span>
                <button class="px-3 py-2 rounded-xl border border-gray-300 bg-white text-sm hover:bg-gray-50">Abmelden</button>
            </div>
        </div>
    </header>

    <!-- Tab Contents -->
    <main>
        <!-- Home Tab -->
        <section id="home" class="tab-content active">
            <div class="max-w-6xl mx-auto px-4 py-14">
                <div class="grid grid-cols-2 md:grid-cols-3 gap-5 place-items-stretch">
                    <button class="home-tile rounded-2xl border border-gray-200 bg-white shadow-sm p-6 text-left hover:bg-gray-50 flex flex-col items-start gap-2 transition-all hover:scale-105" data-category="einsatzdienste">
                        <div class="text-2xl">üöë</div>
                        <div class="text-lg font-semibold">Einsatzdienste</div>
                        <div class="text-sm text-gray-600">Tippe zum √ñffnen</div>
                    </button>
                    <button class="home-tile rounded-2xl border border-gray-200 bg-white shadow-sm p-6 text-left hover:bg-gray-50 flex flex-col items-start gap-2 transition-all hover:scale-105" data-category="verwaltung">
                        <div class="text-2xl">üè¢</div>
                        <div class="text-lg font-semibold">Verwaltung</div>
                        <div class="text-sm text-gray-600">Tippe zum √ñffnen</div>
                    </button>
                    <button class="home-tile rounded-2xl border border-gray-200 bg-white shadow-sm p-6 text-left hover:bg-gray-50 flex flex-col items-start gap-2 transition-all hover:scale-105" data-category="ticketsystem">
                        <div class="text-2xl">üé´</div>
                        <div class="text-lg font-semibold">Ticketsystem</div>
                        <div class="text-sm text-gray-600">Tippe zum √ñffnen</div>
                    </button>
                    <button class="home-tile rounded-2xl border border-gray-200 bg-white shadow-sm p-6 text-left hover:bg-gray-50 flex flex-col items-start gap-2 transition-all hover:scale-105" data-category="hygiene">
                        <div class="text-2xl">üßº</div>
                        <div class="text-lg font-semibold">Hygiene</div>
                        <div class="text-sm text-gray-600">Tippe zum √ñffnen</div>
                    </button>
                    <button class="home-tile rounded-2xl border border-gray-200 bg-white shadow-sm p-6 text-left hover:bg-gray-50 flex flex-col items-start gap-2 transition-all hover:scale-105" data-category="checklisten">
                        <div class="text-2xl">‚úÖ</div>
                        <div class="text-lg font-semibold">Checklisten</div>
                        <div class="text-sm text-gray-600">Tippe zum √ñffnen</div>
                    </button>
                    <button class="home-tile rounded-2xl border border-gray-200 bg-white shadow-sm p-6 text-left hover:bg-gray-50 flex flex-col items-start gap-2 transition-all hover:scale-105" data-category="wichtige">
                        <div class="text-2xl">üìö</div>
                        <div class="text-lg font-semibold">Unterlagen</div>
                        <div class="text-sm text-gray-600">Tippe zum √ñffnen</div>
                    </button>
                </div>
            </div>
        </section>

        <!-- Termine Tab -->
        <section id="termine" class="tab-content">
            <div class="max-w-6xl mx-auto px-4 py-10">
                <header class="flex flex-col md:flex-row md:items-end md:justify-between gap-4">
                    <div>
                        <h2 class="text-3xl font-extrabold">Termine</h2>
                        <p class="text-gray-600">Zeigt bevorstehende Dienste, √úbungen und Treffen.</p>
                    </div>
                    <div class="flex gap-2">
                        <select id="event-filter" class="rounded-xl border border-gray-300 px-3 py-2">
                            <option value="">Alle Typen</option>
                            <option>√úbung</option>
                            <option>Dienst</option>
                            <option>Fortbildung</option>
                            <option>Einsatz</option>
                        </select>
                    </div>
                </header>
                
                <!-- Event Ticker -->
                <div id="event-ticker" class="border-b border-gray-200 bg-white/80 backdrop-blur mt-4">
                    <!-- Ticker content will be loaded by JavaScript -->
                </div>

                <!-- Events List -->
                <div id="events-list" class="grid md:grid-cols-2 gap-4 mt-6">
                    <!-- Events will be loaded by JavaScript -->
                </div>

                <!-- Add Event Form -->
                <div class="mt-8 rounded-2xl border border-gray-200 p-5 bg-white shadow-sm">
                    <div class="text-sm uppercase tracking-widest text-gray-500">Neuer Termin (lokal gespeichert)</div>
                    <div class="grid md:grid-cols-5 gap-3 mt-3">
                        <input id="event-title" placeholder="Titel" class="rounded-xl border border-gray-300 px-3 py-2">
                        <input id="event-start" type="datetime-local" class="rounded-xl border border-gray-300 px-3 py-2">
                        <input id="event-end" type="datetime-local" class="rounded-xl border border-gray-300 px-3 py-2">
                        <input id="event-location" placeholder="Ort" class="rounded-xl border border-gray-300 px-3 py-2">
                        <select id="event-type" class="rounded-xl border border-gray-300 px-3 py-2">
                            <option>√úbung</option>
                            <option>Dienst</option>
                            <option>Fortbildung</option>
                            <option>Einsatz</option>
                        </select>
                    </div>
                    <button id="add-event" class="mt-3 px-4 py-2 rounded-xl bg-black text-white text-sm shadow hover:bg-gray-800 transition-colors">Termin hinzuf√ºgen</button>
                </div>
            </div>
        </section>

        <!-- Chat Tab -->
        <section id="chat" class="tab-content">
            <div class="max-w-6xl mx-auto px-4 py-10">
                <header class="flex items-center justify-between">
                    <div>
                        <h2 class="text-3xl font-extrabold">Chat-R√§ume</h2>
                        <p class="text-gray-600">Demo-Chat (lokal gespeichert).</p>
                    </div>
                </header>

                <!-- WhatsApp Links -->
                <div class="mt-4 rounded-2xl border border-gray-200 bg-white shadow-sm p-4">
                    <div class="text-sm uppercase tracking-widest text-gray-500">WhatsApp-Gruppen</div>
                    <div class="mt-2 flex flex-wrap gap-2">
                        <a href="https://chat.whatsapp.com/HDDD0cctUY9KEW5BCSZ7jk" class="px-3 py-2 rounded-xl border border-gray-300 bg-white text-sm hover:bg-gray-50">Hauptgruppe</a>
                        <a href="https://wa.me/4917012345678?text=Hallo%20Team" class="px-3 py-2 rounded-xl border border-gray-300 bg-white text-sm hover:bg-gray-50">Direktchat</a>
                    </div>
                </div>

                <div class="grid md:grid-cols-3 gap-6 mt-6">
                    <!-- Chat rooms and messages will be loaded by JavaScript -->
                    <aside id="chat-rooms" class="md:col-span-1 space-y-2">
                        <!-- Chat rooms loaded by JS -->
                    </aside>
                    <main class="md:col-span-2 rounded-2xl border border-gray-200 bg-white shadow-sm p-4 flex flex-col h-[480px]">
                        <div id="chat-messages" class="flex-1 overflow-y-auto space-y-3 pr-1">
                            <!-- Messages loaded by JS -->
                        </div>
                        <div class="mt-3 flex gap-2">
                            <input id="chat-input" placeholder="Nachricht schreiben‚Ä¶" class="flex-1 rounded-xl border border-gray-300 px-3 py-2">
                            <button id="send-message" class="px-4 py-2 rounded-xl bg-black text-white text-sm shadow">Senden</button>
                        </div>
                    </main>
                </div>
            </div>
        </section>

        <!-- Other tabs... (Album, Forms, Files would be similar) -->
        <section id="album" class="tab-content">
            <div class="max-w-6xl mx-auto px-4 py-10">
                <h2 class="text-3xl font-extrabold">Bilderalbum</h2>
                <p class="text-gray-600">Gemeinsame Team-Fotos.</p>
                <div class="grid md:grid-cols-3 gap-6 mt-6">
                    <a href="https://cloud.example.org/apps/photos/s/TEAM-ALBUM" class="rounded-2xl border border-gray-200 p-5 bg-white shadow-sm block hover:bg-gray-50">
                        <div class="h-28 rounded-xl bg-gray-100"></div>
                        <div class="font-semibold mt-3">Team-Album √∂ffnen</div>
                        <div class="text-sm text-gray-600">Nextcloud/SharePoint</div>
                    </a>
                    <a href="#" class="rounded-2xl border border-gray-200 p-5 bg-white shadow-sm block hover:bg-gray-50">
                        <div class="h-28 rounded-xl bg-gray-100"></div>
                        <div class="font-semibold mt-3">Einsatz Fotos</div>
                        <div class="text-sm text-gray-600">Beispielalbum</div>
                    </a>
                </div>
            </div>
        </section>
    </main>

    <!-- Bottom Dock -->
    <nav class="fixed bottom-2 left-1/2 -translate-x-1/2 z-20 bg-white/90 backdrop-blur rounded-2xl shadow-lg border border-gray-200 px-3 py-2 flex gap-3">
        <a href="https://app.groupalarm.com/" target="_blank" class="w-16 flex flex-col items-center gap-1 text-xs hover:scale-105 transition-transform">
            <div class="text-lg">üö®</div>
            <div>GroupAlarm</div>
        </a>
        <a href="https://chat.whatsapp.com/HDDD0cctUY9KEW5BCSZ7jk" target="_blank" class="w-16 flex flex-col items-center gap-1 text-xs hover:scale-105 transition-transform">
            <div class="text-lg">üí¨</div>
            <div>WhatsApp</div>
        </a>
        <a href="https://teams.microsoft.com/" target="_blank" class="w-16 flex flex-col items-center gap-1 text-xs hover:scale-105 transition-transform">
            <div class="text-lg">üë•</div>
            <div>Teams</div>
        </a>
        <a href="https://arno.cloud/" target="_blank" class="w-16 flex flex-col items-center gap-1 text-xs hover:scale-105 transition-transform">
            <div class="text-lg">üß≠</div>
            <div>ARNO</div>
        </a>
        <a href="https://planner.cloud.microsoft/" target="_blank" class="w-16 flex flex-col items-center gap-1 text-xs hover:scale-105 transition-transform">
            <div class="text-lg">üóÇÔ∏è</div>
            <div>Planner</div>
        </a>
    </nav>

    <!-- Footer -->
    <footer class="border-t border-gray-200 py-8 mt-10">
        <div class="max-w-6xl mx-auto px-4 text-sm text-gray-500">
            ¬© 2024 Helfer App. Bereit f√ºr Einsatz & √úbung.
        </div>
    </footer>

    <!-- Modal for Home Tiles -->
    <div id="home-modal" class="modal">
        <div class="modal-content">
            <div class="flex items-center justify-between">
                <div id="modal-title" class="text-lg font-semibold">Titel</div>
                <button id="close-modal" class="px-3 py-1 border border-gray-300 rounded-xl text-sm bg-white hover:bg-gray-50">Schlie√üen</button>
            </div>
            <div id="modal-content" class="mt-4 grid sm:grid-cols-2 gap-3">
                <!-- Content loaded by JavaScript -->
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script>
        // Tab Navigation
        document.querySelectorAll('.tab-button').forEach(button => {
            button.addEventListener('click', () => {
                // Remove active class from all tabs
                document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
                
                // Add active class to clicked tab
                button.classList.add('active');
                const tabId = button.getAttribute('data-tab');
                document.getElementById(tabId).classList.add('active');
            });
        });

        // Home Tiles Modal
        const homeTiles = {
            einsatzdienste: [
                { title: "Einsatzberichte", url: "https://forms.office.com/..." },
                { title: "Patientenprotokoll", url: "https://forms.office.com/..." },
                { title: "First Responder Protokoll", url: "https://forms.office.com/..." },
            ],
            verwaltung: [
                { title: "SharePoint ‚Äì Verwaltung", url: "https://maltesercloud-my.sharepoint.com/..." },
                { title: "Nextcloud ‚Äì Team", url: "https://cloud.example.org/..." },
            ],
            ticketsystem: [
                { title: "Ticketsystem", url: "https://forms.office.com/..." },
            ],
            hygiene: [
                { title: "Hygieneplan Verpflegung", url: "https://cloud.example.org/..." },
            ],
            checklisten: [
                { title: "Checkliste Feldk√ºche", url: "https://cloud.example.org/..." },
            ],
            wichtige: [
                { title: "AAO ‚Äì Alarmordnung", url: "https://cloud.example.org/..." },
            ]
        };

        const tileLabels = {
            einsatzdienste: "Einsatzdienste",
            verwaltung: "Verwaltung", 
            ticketsystem: "Ticketsystem",
            hygiene: "Hygiene",
            checklisten: "Checklisten",
            wichtige: "Wichtige Unterlagen"
        };

        document.querySelectorAll('.home-tile').forEach(tile => {
            tile.addEventListener('click', () => {
                const category = tile.getAttribute('data-category');
                const modal = document.getElementById('home-modal');
                const modalTitle = document.getElementById('modal-title');
                const modalContent = document.getElementById('modal-content');
                
                modalTitle.textContent = tileLabels[category];
                modalContent.innerHTML = homeTiles[category].map(item => `
                    <div class="rounded-xl border border-gray-200 bg-white p-4">
                        <div class="font-medium">${item.title}</div>
                        <div class="mt-2">
                            <a href="${item.url}" target="_blank" class="px-3 py-2 rounded-xl bg-black text-white text-sm hover:opacity-90">√ñffnen</a>
                        </div>
                    </div>
                `).join('');
                
                modal.classList.add('active');
            });
        });

        document.getElementById('close-modal').addEventListener('click', () => {
            document.getElementById('home-modal').classList.remove('active');
        });

        // Simple Events System (you can expand this)
        document.getElementById('add-event')?.addEventListener('click', () => {
            const title = document.getElementById('event-title').value;
            const start = document.getElementById('event-start').value;
            if (title && start) {
                alert(`Termin "${title}" hinzugef√ºgt!`);
                // Clear form
                document.getElementById('event-title').value = '';
                document.getElementById('event-start').value = '';
                document.getElementById('event-end').value = '';
                document.getElementById('event-location').value = '';
            }
        });

        // Initial load - show some demo content
        document.addEventListener('DOMContentLoaded', () => {
            // Add some demo events
            const eventsList = document.getElementById('events-list');
            if (eventsList) {
                eventsList.innerHTML = `
                    <article class="rounded-2xl border border-gray-200 p-5 bg-white shadow-sm">
                        <div class="text-sm uppercase tracking-widest text-gray-500">√úbung</div>
                        <h3 class="text-lg font-semibold mt-1">√úbungsdienst Verpflegung</h3>
                        <p class="text-gray-700 mt-1">5. Okt 2025, 18:00 ‚Äì 5. Okt 2025, 21:00</p>
                        <p class="text-gray-600">üìç Unterkunft Lagerhalle</p>
                    </article>
                    <article class="rounded-2xl border border-gray-200 p-5 bg-white shadow-sm">
                        <div class="text-sm uppercase tracking-widest text-gray-500">Dienst</div>
                        <h3 class="text-lg font-semibold mt-1">Sanit√§tsdienst Stadtfest</h3>
                        <p class="text-gray-700 mt-1">12. Okt 2025, 10:00 ‚Äì 12. Okt 2025, 18:00</p>
                        <p class="text-gray-600">üìç Innenstadt</p>
                    </article>
                `;
            }

            // Add demo chat
            const chatRooms = document.getElementById('chat-rooms');
            const chatMessages = document.getElementById('chat-messages');
            if (chatRooms && chatMessages) {
                chatRooms.innerHTML = `
                    <button class="w-full text-left px-4 py-3 rounded-xl border shadow-sm bg-black text-white border-black">
                        <div class="flex items-center justify-between">
                            <span class="font-medium">Einsatzleitung</span>
                            <span class="text-xs bg-white text-black rounded-full px-2 py-0.5">2</span>
                        </div>
                    </button>
                    <button class="w-full text-left px-4 py-3 rounded-xl border shadow-sm bg-white border-gray-200">
                        <div class="flex items-center justify-between">
                            <span class="font-medium">Verpflegungsteam</span>
                        </div>
                    </button>
                `;

                chatMessages.innerHTML = `
                    <div class="max-w-[80%]">
                        <div class="rounded-2xl px-4 py-2 border bg-gray-50 border-gray-200">
                            <div class="text-sm"><span class="font-semibold">Lea</span>: Bitte Wasserkanister auff√ºllen.</div>
                            <div class="text-[10px] opacity-70 mt-1">${new Date().toLocaleString()}</div>
                        </div>
                    </div>
                `;
            }
        });

        // Simple chat functionality
        document.getElementById('send-message')?.addEventListener('click', () => {
            const input = document.getElementById('chat-input');
            const messages = document.getElementById('chat-messages');
            if (input.value.trim() && messages) {
                messages.innerHTML += `
                    <div class="max-w-[80%] ml-auto">
                        <div class="rounded-2xl px-4 py-2 border bg-black text-white border-black">
                            <div class="text-sm"><span class="font-semibold">Ich</span>: ${input.value}</div>
                            <div class="text-[10px] opacity-70 mt-1">${new Date().toLocaleString()}</div>
                        </div>
                    </div>
                `;
                input.value = '';
                messages.scrollTop = messages.scrollHeight;
            }
        });

        document.getElementById('chat-input')?.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                document.getElementById('send-message').click();
            }
        });
    </script>

    <!-- Service Worker -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('./sw.js')
                    .then(function(registration) {
                        console.log('‚úÖ ServiceWorker registriert');
                    })
                    .catch(function(err) {
                        console.log('‚ùå ServiceWorker Fehler:', err);
                    });
            });
        }
    </script>
</body>
</html>
